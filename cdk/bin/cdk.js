#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
require("source-map-support/register");
const cdk = require("@aws-cdk/cdk");
const infra_stack_1 = require("../lib/infra-stack");
const app = new cdk.App();
const infra = new infra_stack_1.InfraStack(app, 'DevInfraStack');
new infra_stack_1.SrvStack(infra, 'VipSrv', {
    name: 'vip',
    cluster: infra.cluster,
    serviceSG: infra.serviceSG,
    fromPath: true,
    image: '../vip-srv',
    useLoadBalancer: false,
    serviceDiscoveryDomain: infra.serviceDiscoveryDomain,
    envVars: { 'MICRO_SERVER_ADDRESS': ':4000' },
});
new infra_stack_1.SrvStack(infra, 'GreeterSrv', {
    name: 'greeter',
    cluster: infra.cluster,
    serviceSG: infra.serviceSG,
    fromPath: true,
    image: '../greeter-srv',
    useLoadBalancer: false,
    serviceDiscoveryDomain: infra.serviceDiscoveryDomain,
    envVars: { 'MICRO_SERVER_ADDRESS': ':4000' },
});
new infra_stack_1.SrvStack(infra, 'Api', {
    name: 'api',
    cluster: infra.cluster,
    serviceSG: infra.serviceSG,
    fromPath: true,
    image: '../api',
    useLoadBalancer: false,
    serviceDiscoveryDomain: infra.serviceDiscoveryDomain,
    envVars: { 'MICRO_SERVER_ADDRESS': ':4000' },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2RrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiY2RrLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHVDQUFxQztBQUNyQyxvQ0FBcUM7QUFDckMsb0RBQTBEO0FBRTFELE1BQU0sR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQzFCLE1BQU0sS0FBSyxHQUFHLElBQUksd0JBQVUsQ0FBQyxHQUFHLEVBQUUsZUFBZSxDQUFDLENBQUM7QUFDbkQsSUFBSSxzQkFBUSxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUU7SUFDNUIsSUFBSSxFQUFFLEtBQUs7SUFDWCxPQUFPLEVBQUUsS0FBSyxDQUFDLE9BQU87SUFDdEIsU0FBUyxFQUFFLEtBQUssQ0FBQyxTQUFTO0lBQzFCLFFBQVEsRUFBRSxJQUFJO0lBQ2QsS0FBSyxFQUFFLFlBQVk7SUFDbkIsZUFBZSxFQUFFLEtBQUs7SUFDdEIsc0JBQXNCLEVBQUUsS0FBSyxDQUFDLHNCQUFzQjtJQUNwRCxPQUFPLEVBQUUsRUFBRSxzQkFBc0IsRUFBRSxPQUFPLEVBQUU7Q0FDN0MsQ0FBQyxDQUFDO0FBRUgsSUFBSSxzQkFBUSxDQUFDLEtBQUssRUFBRSxZQUFZLEVBQUU7SUFDaEMsSUFBSSxFQUFFLFNBQVM7SUFDZixPQUFPLEVBQUUsS0FBSyxDQUFDLE9BQU87SUFDdEIsU0FBUyxFQUFFLEtBQUssQ0FBQyxTQUFTO0lBQzFCLFFBQVEsRUFBRSxJQUFJO0lBQ2QsS0FBSyxFQUFFLGdCQUFnQjtJQUN2QixlQUFlLEVBQUUsS0FBSztJQUN0QixzQkFBc0IsRUFBRSxLQUFLLENBQUMsc0JBQXNCO0lBQ3BELE9BQU8sRUFBRSxFQUFFLHNCQUFzQixFQUFFLE9BQU8sRUFBRTtDQUM3QyxDQUFDLENBQUM7QUFFSCxJQUFJLHNCQUFRLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRTtJQUN6QixJQUFJLEVBQUUsS0FBSztJQUNYLE9BQU8sRUFBRSxLQUFLLENBQUMsT0FBTztJQUN0QixTQUFTLEVBQUUsS0FBSyxDQUFDLFNBQVM7SUFDMUIsUUFBUSxFQUFFLElBQUk7SUFDZCxLQUFLLEVBQUUsUUFBUTtJQUNmLGVBQWUsRUFBRSxLQUFLO0lBQ3RCLHNCQUFzQixFQUFFLEtBQUssQ0FBQyxzQkFBc0I7SUFDcEQsT0FBTyxFQUFFLEVBQUUsc0JBQXNCLEVBQUUsT0FBTyxFQUFFO0NBQzdDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIiMhL3Vzci9iaW4vZW52IG5vZGVcbmltcG9ydCAnc291cmNlLW1hcC1zdXBwb3J0L3JlZ2lzdGVyJztcbmltcG9ydCBjZGsgPSByZXF1aXJlKCdAYXdzLWNkay9jZGsnKTtcbmltcG9ydCB7IEluZnJhU3RhY2ssIFNydlN0YWNrIH0gZnJvbSAnLi4vbGliL2luZnJhLXN0YWNrJztcblxuY29uc3QgYXBwID0gbmV3IGNkay5BcHAoKTtcbmNvbnN0IGluZnJhID0gbmV3IEluZnJhU3RhY2soYXBwLCAnRGV2SW5mcmFTdGFjaycpO1xubmV3IFNydlN0YWNrKGluZnJhLCAnVmlwU3J2Jywge1xuICBuYW1lOiAndmlwJyxcbiAgY2x1c3RlcjogaW5mcmEuY2x1c3RlcixcbiAgc2VydmljZVNHOiBpbmZyYS5zZXJ2aWNlU0csXG4gIGZyb21QYXRoOiB0cnVlLFxuICBpbWFnZTogJy4uL3ZpcC1zcnYnLFxuICB1c2VMb2FkQmFsYW5jZXI6IGZhbHNlLFxuICBzZXJ2aWNlRGlzY292ZXJ5RG9tYWluOiBpbmZyYS5zZXJ2aWNlRGlzY292ZXJ5RG9tYWluLFxuICBlbnZWYXJzOiB7ICdNSUNST19TRVJWRVJfQUREUkVTUyc6ICc6NDAwMCcgfSxcbn0pO1xuXG5uZXcgU3J2U3RhY2soaW5mcmEsICdHcmVldGVyU3J2Jywge1xuICBuYW1lOiAnZ3JlZXRlcicsXG4gIGNsdXN0ZXI6IGluZnJhLmNsdXN0ZXIsXG4gIHNlcnZpY2VTRzogaW5mcmEuc2VydmljZVNHLFxuICBmcm9tUGF0aDogdHJ1ZSxcbiAgaW1hZ2U6ICcuLi9ncmVldGVyLXNydicsXG4gIHVzZUxvYWRCYWxhbmNlcjogZmFsc2UsXG4gIHNlcnZpY2VEaXNjb3ZlcnlEb21haW46IGluZnJhLnNlcnZpY2VEaXNjb3ZlcnlEb21haW4sXG4gIGVudlZhcnM6IHsgJ01JQ1JPX1NFUlZFUl9BRERSRVNTJzogJzo0MDAwJyB9LFxufSk7XG5cbm5ldyBTcnZTdGFjayhpbmZyYSwgJ0FwaScsIHtcbiAgbmFtZTogJ2FwaScsXG4gIGNsdXN0ZXI6IGluZnJhLmNsdXN0ZXIsXG4gIHNlcnZpY2VTRzogaW5mcmEuc2VydmljZVNHLFxuICBmcm9tUGF0aDogdHJ1ZSxcbiAgaW1hZ2U6ICcuLi9hcGknLFxuICB1c2VMb2FkQmFsYW5jZXI6IGZhbHNlLFxuICBzZXJ2aWNlRGlzY292ZXJ5RG9tYWluOiBpbmZyYS5zZXJ2aWNlRGlzY292ZXJ5RG9tYWluLFxuICBlbnZWYXJzOiB7ICdNSUNST19TRVJWRVJfQUREUkVTUyc6ICc6NDAwMCcgfSxcbn0pO1xuIl19